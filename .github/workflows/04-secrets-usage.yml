# CONCEPT 4: Secrets Usage
# Learn how to use secrets safely in workflows

name: 04 - Secrets Usage Demo

on:
  push:
    branches:
      - main
  workflow_dispatch:

jobs:
  use-secrets:
    runs-on: ubuntu-latest
    
    steps:
      # IMPORTANT: Secrets are accessed via secrets context
      - name: Use a secret
        env:
          # Pass secret to env var - GitHub masks it in logs
          MY_SECRET: ${{ secrets.MY_API_KEY }}
        run: |
          echo "Trying to print secret..."
          echo "Secret value: $MY_SECRET"
          echo "Notice: GitHub will mask the actual value with ***"
      
      # Demonstrate that secrets are masked
      - name: Secrets are always masked
        run: |
          echo "Even if you try to print: ${{ secrets.MY_API_KEY }}"
          echo "GitHub replaces it with *** in logs"
      
      # Show built-in GITHUB_TOKEN secret
      - name: Built-in GITHUB_TOKEN
        run: |
          echo "GITHUB_TOKEN is auto-provided: ${{ secrets.GITHUB_TOKEN != '' }}"
          echo "It allows the workflow to interact with GitHub API"
